<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AlliedRx - Chapter 5: Coaching Strategies & Community Resources</title>
    <style>
        /* === CSS VARIABLES (EXACT BRANDING) === */
        :root {
            --color-primary: #af4bef; /* Purple - main brand color */
            --color-primary-soft: #d492ff; /* Light purple */
            --color-accent: #8380f0; /* Blue-purple accent */
            --color-success: #00b894; /* Green for correct/success */
            --color-error: #e17055; /* Red/Orange for errors */
            --color-warning: #fdcb6e; /* Yellow for warnings */
            --color-info: #0984e3; /* Blue for info */
            --color-bg: #f7f5fb; /* Light background */
            --color-text: #2b2b2b; /* Dark text */
            --color-muted: #6c6880; /* Muted text */
            --color-dark: #0c0a18; /* Dark background */
            --radius-lg: 24px;
            --radius-md: 16px;
            --radius-sm: 12px;
            --shadow-soft: 0 18px 45px rgba(23, 10, 61, 0.18);
            --shadow-hover: 0 25px 50px rgba(175, 75, 239, 0.15);
            --shadow-card: 0 12px 30px rgba(15, 23, 42, 0.1);
        }

        /* === REQUIRED ANIMATIONS === */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes checkmarkPop {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* === BASE STYLES === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: radial-gradient(circle at top left, #ffffff 0, #f1ecff 40%, var(--color-bg) 100%);
            color: var(--color-text);
            line-height: 1.5;
            padding: 24px;
            min-height: 100vh;
            -webkit-text-size-adjust: 100%;
        }

        @media (max-width: 600px) {
            body {
                padding: 12px;
            }
        }

        .page {
            max-width: 1200px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-soft);
            padding: 28px 30px 32px;
            animation: fadeInUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 900px) {
            .page {
                padding: 22px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0;
            }
            .page {
                border-radius: 0;
                box-shadow: none;
                padding: 18px 14px 22px;
            }
        }

        /* === HEADER (EXACT TEMPLATE) === */
        .brand-row {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 14px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            width: 100%;
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .brand-logo {
            height: 40px;
            width: auto;
            max-width: 100%;
            filter: drop-shadow(0 3px 8px rgba(0, 0, 0, 0.2));
            transition: transform 0.3s ease;
        }

        .brand-logo:hover {
            transform: scale(1.05);
        }

        .course-meta {
            display: flex;
            flex-direction: column;
            gap: 2px;
            max-width: 100%;
        }

        .course-name {
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: var(--color-muted);
            white-space: normal;
        }

        .week-label {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 4px 10px;
            border-radius: 999px;
            background: rgba(175, 75, 239, 0.08);
            font-size: 0.76rem;
            color: var(--color-primary);
            white-space: normal;
        }

        .week-label-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--color-success);
            flex-shrink: 0;
        }

        .badge-mode {
            padding: 5px 10px;
            border-radius: 999px;
            background: rgba(12, 10, 24, 0.06);
            border: 1px solid rgba(12, 10, 24, 0.08);
            font-size: 0.74rem;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            color: var(--color-muted);
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .badge-mode:hover {
            background: rgba(175, 75, 239, 0.1);
            border-color: var(--color-primary-soft);
            color: var(--color-primary);
        }

        @media (max-width: 480px) {
            .brand-row {
                flex-direction: column;
                align-items: flex-start;
            }
            .badge-mode {
                margin-top: 6px;
            }
        }

        h1 {
            font-size: clamp(1.8rem, 3vw, 2.2rem);
            line-height: 1.1;
            color: var(--color-primary);
            margin-bottom: 6px;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        .module-subtitle {
            font-size: 0.98rem;
            color: var(--color-muted);
            max-width: 600px;
            margin-bottom: 24px;
            animation: fadeInUp 0.6s ease-out 0.4s both;
        }

        /* === PROGRESS TRACKER (2-STEP ONLY) === */
        .progress-tracker {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            padding: 0 20px;
            max-width: 500px;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 50px;
            right: 50px;
            height: 3px;
            background: rgba(12, 10, 24, 0.08);
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            flex: 1;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid rgba(12, 10, 24, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--color-muted);
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-circle {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
            transform: scale(1.1);
        }

        .progress-step.completed .step-circle {
            background: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        .step-label {
            font-size: 0.75rem;
            color: var(--color-muted);
            text-align: center;
            font-weight: 500;
        }

        .progress-step.active .step-label {
            color: var(--color-primary);
            font-weight: 600;
        }

        /* === PROGRESS SUMMARY === */
        .progress-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
            animation: fadeInUp 0.6s ease-out 0.5s both;
        }

        .summary-card {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-md);
            padding: 16px;
            border: 1px solid rgba(12, 10, 24, 0.06);
            text-align: center;
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-card);
            border-color: var(--color-primary-soft);
        }

        .summary-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--color-primary);
            display: block;
            line-height: 1;
            margin-bottom: 4px;
        }

        .summary-label {
            font-size: 0.8rem;
            color: var(--color-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* === ACTIVITY GRID (SINGLE COLUMN FOR 2 ACTIVITIES) === */
        .activity-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        /* === ACTIVITY CARD STRUCTURE (EXACT TEMPLATE) === */
        .activity-card {
            background: white;
            border-radius: var(--radius-md);
            border: 1px solid rgba(12, 10, 24, 0.08);
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--color-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--color-primary-soft);
        }

        .activity-card:hover::before {
            opacity: 1;
        }

        .activity-card.completed {
            border-color: var(--color-success);
        }

        .activity-card.completed::before {
            background: var(--color-success);
            opacity: 1;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .activity-number {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--color-primary);
            background: rgba(175, 75, 239, 0.1);
            padding: 4px 10px;
            border-radius: 20px;
        }

        .activity-status {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 12px;
            background: rgba(12, 10, 24, 0.06);
            color: var(--color-muted);
        }

        .activity-card.completed .activity-status {
            background: rgba(0, 184, 148, 0.1);
            color: var(--color-success);
        }

        .activity-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 8px;
        }

        .activity-description {
            font-size: 0.9rem;
            color: var(--color-muted);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* === ACTIVITY 1: TEACH-BACK METHOD SIMULATION === */
        .dialogue-container {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(12, 10, 24, 0.08);
        }

        .dialogue-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .dialogue-icon {
            font-size: 1.2rem;
        }

        .dialogue-bubble {
            margin-bottom: 15px;
            padding: 15px;
            border-radius: var(--radius-sm);
            position: relative;
            max-width: 80%;
        }

        .dialogue-bubble.patient {
            background: rgba(131, 128, 240, 0.1);
            border-left: 4px solid var(--color-accent);
            margin-right: auto;
        }

        .dialogue-bubble.assistant {
            background: rgba(175, 75, 239, 0.1);
            border-right: 4px solid var(--color-primary);
            margin-left: auto;
            text-align: right;
        }

        .dialogue-speaker {
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--color-muted);
        }

        .dialogue-text {
            font-size: 0.9rem;
            color: var(--color-text);
            line-height: 1.4;
        }

        /* Response Options */
        .response-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .response-options {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .response-option {
            background: rgba(12, 10, 24, 0.03);
            border-radius: var(--radius-sm);
            padding: 15px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
            font-size: 0.9rem;
            color: var(--color-text);
        }

        .response-option:hover {
            background: rgba(175, 75, 239, 0.08);
            border-color: var(--color-primary-soft);
            transform: translateY(-2px);
        }

        .response-option.selected {
            background: rgba(0, 184, 148, 0.1);
            border-color: var(--color-success);
        }

        .response-option.wrong {
            background: rgba(225, 112, 85, 0.1);
            border-color: var(--color-error);
            animation: shake 0.5s ease;
        }

        /* Teach-Back Steps */
        .teachback-steps {
            background: rgba(0, 184, 148, 0.08);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--color-success);
        }

        .steps-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--color-success);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .steps-list {
            list-style: none;
            counter-reset: step-counter;
        }

        .steps-list li {
            counter-increment: step-counter;
            margin-bottom: 8px;
            font-size: 0.85rem;
            color: var(--color-text);
            padding-left: 25px;
            position: relative;
        }

        .steps-list li:before {
            content: counter(step-counter);
            position: absolute;
            left: 0;
            width: 18px;
            height: 18px;
            background: var(--color-success);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* === ACTIVITY 2: COMMUNITY RESOURCE NAVIGATOR === */
        .patient-needs-container {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(12, 10, 24, 0.08);
        }

        .needs-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .needs-grid {
                grid-template-columns: 1fr;
            }
        }

        .need-card {
            background: rgba(12, 10, 24, 0.03);
            border-radius: var(--radius-sm);
            padding: 15px;
            border: 2px dashed rgba(12, 10, 24, 0.1);
            min-height: 120px;
            transition: all 0.3s ease;
            position: relative;
        }

        .need-card.hover {
            border-color: var(--color-primary);
            background: rgba(175, 75, 239, 0.05);
        }

        .need-card.filled {
            border: 2px solid var(--color-primary-soft);
            background: rgba(175, 75, 239, 0.08);
        }

        .need-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 8px;
        }

        .need-description {
            font-size: 0.8rem;
            color: var(--color-text);
            margin-bottom: 10px;
        }

        /* Resource Items */
        .resource-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }

        .resource-item {
            background: rgba(12, 10, 24, 0.05);
            border-radius: 20px;
            padding: 8px 15px;
            font-size: 0.85rem;
            cursor: grab;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .resource-item:hover {
            background: rgba(175, 75, 239, 0.1);
            border-color: var(--color-primary-soft);
            transform: translateY(-2px);
        }

        .resource-item.dragging {
            opacity: 0.7;
            transform: scale(0.95);
        }

        .resource-item.used {
            opacity: 0.5;
            cursor: default;
            text-decoration: line-through;
        }

        /* Resource Details Popup */
        .resource-details {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 15px;
            margin-top: 15px;
            border: 1px solid rgba(12, 10, 24, 0.08);
            display: none;
        }

        .resource-details.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .details-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .details-content {
            font-size: 0.85rem;
            color: var(--color-text);
            line-height: 1.5;
        }

        .details-content strong {
            color: var(--color-primary);
        }

        /* === FEEDBACK CONTAINER === */
        .feedback-container {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 15px;
            border: 1px solid rgba(12, 10, 24, 0.08);
            margin-top: 20px;
            display: none;
        }

        .feedback-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-icon {
            font-size: 1.2rem;
        }

        .feedback-icon.correct {
            color: var(--color-success);
        }

        .feedback-icon.incorrect {
            color: var(--color-error);
        }

        .feedback-content {
            font-size: 0.85rem;
            color: var(--color-text);
            line-height: 1.5;
        }

        .feedback-content strong {
            color: var(--color-primary);
        }

        /* === ACTION BUTTONS === */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: #9a3bd6;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(175, 75, 239, 0.3);
        }

        .btn-secondary {
            background: rgba(12, 10, 24, 0.06);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: rgba(12, 10, 24, 0.1);
            transform: translateY(-2px);
        }

        .btn-icon {
            font-size: 1.1em;
        }

        /* === RESULTS PANEL === */
        .results-panel {
            background: var(--color-dark);
            color: white;
            border-radius: var(--radius-md);
            padding: 30px;
            margin-top: 30px;
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .results-panel.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .results-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: white;
        }

        .score-display {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--color-primary-soft);
            text-align: center;
            margin: 20px 0;
        }

        .clinical-insights {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-top: 20px;
        }

        .insights-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--color-primary-soft);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insights-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .insights-list li {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            font-size: 0.9rem;
            color: #e5e7eb;
        }

        .insight-dot {
            width: 6px;
            height: 6px;
            margin-top: 6px;
            border-radius: 999px;
            background: var(--color-accent);
            flex-shrink: 0;
        }

        /* === ACCESSIBILITY === */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <main class="page" aria-labelledby="module-heading">
        <!-- HEADER WITH WEEK/CHAPTER (EXACT TEMPLATE) -->
        <header class="brand-row">
            <div class="brand">
                <img
                    src="https://cdn.prod.website-files.com/64d0ccc1558d601cbfb09021/64e9d2f719b1e5258e5d57f5_IMG_1512-p-500.png"
                    alt="AlliedRx logo"
                    class="brand-logo"
                />
                <div class="course-meta">
                    <span class="course-name">Clinical Medical Assistant ‚Ä¢ Week 5</span>
                    <div class="week-label">
                        <span class="week-label-dot"></span>
                        <span>Chapter 5: Patient Education</span>
                    </div>
                </div>
            </div>
            <span class="badge-mode">Campus & Online</span>
        </header>

        <h1 id="module-heading">Coaching Strategies & Community Resources</h1>
        <p class="module-subtitle">
            Master teach-back communication techniques and connect patients with appropriate 
            community resources for comprehensive chronic disease management.
        </p>

        <!-- PROGRESS TRACKER (2-STEP ONLY) -->
        <div class="progress-tracker">
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Teach-Back Method</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Resource Navigation</div>
            </div>
        </div>

        <!-- PROGRESS SUMMARY -->
        <div class="progress-summary">
            <div class="summary-card">
                <span class="summary-number" id="completed-count">0</span>
                <span class="summary-label">Activities Completed</span>
            </div>
            <div class="summary-card">
                <span class="summary-number" id="accuracy-rate">0%</span>
                <span class="summary-label">Current Accuracy</span>
            </div>
            <div class="summary-card">
                <span class="summary-number" id="time-spent">0:00</span>
                <span class="summary-label">Time Spent</span>
            </div>
        </div>

        <!-- ACTIVITY GRID (2 ACTIVITIES) -->
        <div class="activity-grid">
            <!-- ACTIVITY 1: TEACH-BACK METHOD SIMULATION -->
            <section class="activity-card" id="activity-1" data-activity="1" aria-label="Activity 1: Teach-Back Method Simulation">
                <div class="activity-header">
                    <span class="activity-number">Activity 1</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">
                    <span class="activity-icon">üîÑ</span>
                    Teach-Back Method Simulation
                </h3>
                <p class="activity-description">
                    Practice effective teach-back communication with Mr. Ignatio. 
                    Select the most appropriate coaching responses to verify patient understanding.
                </p>

                <!-- Dialogue Simulation -->
                <div class="dialogue-container">
                    <div class="dialogue-title">
                        <span class="dialogue-icon">üí¨</span>
                        Coaching Session: Medication Education
                    </div>

                    <div class="dialogue-bubble patient">
                        <div class="dialogue-speaker">Mr. Ignatio (Patient)</div>
                        <div class="dialogue-text">
                            "So I take this metformin pill twice a day with meals. But what happens if I forget a dose? 
                            And my sister said her diabetes medicine made her sick to her stomach..."
                        </div>
                    </div>

                    <div class="dialogue-bubble assistant">
                        <div class="dialogue-speaker">Taylor (Medical Assistant)</div>
                        <div class="dialogue-text">
                            "Those are excellent questions, Mr. Ignatio. Let me explain about missed doses and side effects first, 
                            then I'd like you to tell me back in your own words so I'm sure I explained it clearly."
                        </div>
                    </div>

                    <div class="dialogue-bubble assistant">
                        <div class="dialogue-speaker">Taylor (Medical Assistant) - Explanation</div>
                        <div class="dialogue-text">
                            "If you miss a dose of metformin, take it as soon as you remember unless it's almost time for your next dose. 
                            Never double up. Taking it with food helps prevent stomach upset. Common side effects include mild nausea 
                            or diarrhea, which usually improve after the first few weeks."
                        </div>
                    </div>
                </div>

                <div class="teachback-steps">
                    <div class="steps-title">
                        <span>üìù</span>
                        Teach-Back Method Steps
                    </div>
                    <ol class="steps-list">
                        <li>Explain information clearly using plain language</li>
                        <li>Ask patient to explain back in their own words</li>
                        <li>Listen carefully for understanding or misconceptions</li>
                        <li>Clarify or re-explain if needed</li>
                        <li>Document teach-back completion in chart</li>
                    </ol>
                </div>

                <!-- Response Options -->
                <div class="response-options" id="response-options">
                    <button class="response-option" data-correct="true">
                        "Now, to make sure I explained that clearly, could you tell me in your own words what you'll do if you miss a dose?"
                    </button>
                    <button class="response-option" data-correct="false">
                        "Do you understand everything about your medication?"
                    </button>
                    <button class="response-option" data-correct="false">
                        "I need you to repeat back exactly what I just said about metformin."
                    </button>
                    <button class="response-option" data-correct="true">
                        "Let's practice together. If you miss your morning dose, but remember at lunchtime, what would you do?"
                    </button>
                </div>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-1">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">‚úì</span>
                        Teach-Back Mastered!
                    </div>
                    <div class="feedback-content">
                        <strong>Effective Teach-Back Responses:</strong><br><br>
                        1. <strong>"Now, to make sure I explained that clearly, could you tell me in your own words what you'll do if you miss a dose?"</strong><br>
                        ‚Ä¢ Uses open-ended, non-threatening language<br>
                        ‚Ä¢ Focuses on specific application of knowledge<br>
                        ‚Ä¢ Emphasizes "in your own words" not rote memorization<br><br>
                        
                        2. <strong>"Let's practice together. If you miss your morning dose, but remember at lunchtime, what would you do?"</strong><br>
                        ‚Ä¢ Uses scenario-based questioning<br>
                        ‚Ä¢ Creates collaborative learning environment<br>
                        ‚Ä¢ Tests application, not just recall<br><br>
                        
                        <strong>Why These Work Better:</strong><br>
                        ‚Ä¢ <strong>Avoids yes/no questions</strong> ("Do you understand?") which patients often answer "yes" even when confused<br>
                        ‚Ä¢ <strong>Doesn't require exact repetition</strong> which can intimidate patients<br>
                        ‚Ä¢ <strong>Focuses on practical application</strong> not theoretical knowledge<br>
                        ‚Ä¢ <strong>Creates partnership</strong> rather than testing dynamic<br><br>
                        
                        <strong>For Hearing-Impaired Patients:</strong><br>
                        ‚Ä¢ Provide written instructions alongside verbal<br>
                        ‚Ä¢ Face patient directly in good lighting<br>
                        ‚Ä¢ Use demonstration alongside explanation<br>
                        ‚Ä¢ Verify understanding with return demonstration
                    </div>
                </div>
            </section>

            <!-- ACTIVITY 2: COMMUNITY RESOURCE NAVIGATOR -->
            <section class="activity-card" id="activity-2" data-activity="2" aria-label="Activity 2: Community Resource Navigator">
                <div class="activity-header">
                    <span class="activity-number">Activity 2</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">
                    <span class="activity-icon">üó∫Ô∏è</span>
                    Community Resource Navigator
                </h3>
                <p class="activity-description">
                    Match Mr. Ignatio's identified needs with appropriate community resources. 
                    Practice patient navigation and referral coordination skills.
                </p>

                <div class="patient-needs-container">
                    <div class="dialogue-title">
                        <span class="dialogue-icon">üéØ</span>
                        Identified Patient Needs
                    </div>
                    <p style="font-size: 0.9rem; color: var(--color-text); margin-bottom: 15px; line-height: 1.5;">
                        After assessment, Mr. Ignatio needs support with: <strong>diet modification, exercise guidance, 
                        medication cost assistance, emotional support, and vision care resources.</strong>
                    </p>

                    <!-- Needs Grid -->
                    <div class="needs-grid">
                        <div class="need-card" id="need-diet" data-need="diet">
                            <div class="need-title">Nutrition & Diet Support</div>
                            <div class="need-description">Needs help modifying traditional recipes, understanding carbohydrate counting, meal planning</div>
                            <div class="need-content"></div>
                        </div>
                        <div class="need-card" id="need-exercise" data-need="exercise">
                            <div class="need-title">Physical Activity Guidance</div>
                            <div class="need-description">Safe exercise options for overweight 62yo with beginning vision changes</div>
                            <div class="need-content"></div>
                        </div>
                        <div class="need-card" id="need-financial" data-need="financial">
                            <div class="need-title">Medication Cost Assistance</div>
                            <div class="need-description">Concerned about affording medications on fixed income</div>
                            <div class="need-content"></div>
                        </div>
                        <div class="need-card" id="need-emotional" data-need="emotional">
                            <div class="need-title">Emotional & Peer Support</div>
                            <div class="need-description">Feeling overwhelmed by diagnosis, wants to connect with others</div>
                            <div class="need-content"></div>
                        </div>
                    </div>
                </div>

                <!-- Resource Bank -->
                <div class="resource-bank" id="resource-bank">
                    <div class="resource-item draggable" data-resource="diet" draggable="true">Diabetes Nutrition Class</div>
                    <div class="resource-item draggable" data-resource="exercise" draggable="true">SilverSneakers¬Æ Program</div>
                    <div class="resource-item draggable" data-resource="financial" draggable="true">Rx Assistance Program</div>
                    <div class="resource-item draggable" data-resource="emotional" draggable="true">Diabetes Support Group</div>
                    <div class="resource-item draggable" data-resource="diet" draggable="true">WIC Nutrition Counseling</div>
                    <div class="resource-item draggable" data-resource="exercise" draggable="true">Aquatic Therapy Class</div>
                    <div class="resource-item draggable" data-resource="financial" draggable="true">GoodRx Coupons</div>
                    <div class="resource-item draggable" data-resource="emotional" draggable="true">ADA Online Community</div>
                </div>

                <!-- Resource Details -->
                <div class="resource-details" id="resource-details">
                    <div class="details-title">
                        <span>‚ÑπÔ∏è</span>
                        Resource Details
                    </div>
                    <div class="details-content" id="details-content">
                        Select a resource to see detailed information including contact methods, eligibility requirements, and referral process.
                    </div>
                </div>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-2">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">‚úì</span>
                        Resource Navigation Complete!
                    </div>
                    <div class="feedback-content">
                        <strong>Optimal Resource Matching:</strong><br><br>
                        1. <strong>Diabetes Nutrition Class</strong> ‚Üí Nutrition & Diet Support<br>
                        ‚Ä¢ Provides hands-on cooking demonstrations<br>
                        ‚Ä¢ Focuses on carbohydrate counting and portion control<br>
                        ‚Ä¢ Offers recipe modification for traditional foods<br><br>
                        
                        2. <strong>SilverSneakers¬Æ Program</strong> ‚Üí Physical Activity Guidance<br>
                        ‚Ä¢ Designed specifically for older adults<br>
                        ‚Ä¢ Low-impact, balance-focused exercises<br>
                        ‚Ä¢ Often covered by Medicare Advantage plans<br><br>
                        
                        3. <strong>Rx Assistance Program</strong> ‚Üí Medication Cost Assistance<br>
                        ‚Ä¢ Pharmaceutical company patient assistance programs<br>
                        ‚Ä¢ Income-based eligibility<br>
                        ‚Ä¢ Can provide 3-12 month medication supply<br><br>
                        
                        4. <strong>Diabetes Support Group</strong> ‚Üí Emotional & Peer Support<br>
                        ‚Ä¢ Local or virtual meetings<br>
                        ‚Ä¢ Peer mentorship opportunities<br>
                        ‚Ä¢ Coping strategy sharing<br><br>
                        
                        <strong>Referral Process Best Practices:</strong><br>
                        1. Obtain patient consent for referral<br>
                        2. Provide warm handoff when possible (call together)<br>
                        3. Give patient written resource information (name, contact, hours)<br>
                        4. Schedule follow-up to confirm connection made<br>
                        5. Document referral in patient chart with date and resource details
                    </div>
                </div>
            </section>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="action-buttons">
            <button class="btn btn-secondary" id="reset-all-btn">
                <span class="btn-icon">‚Üª</span>
                Reset All Activities
            </button>
            <button class="btn btn-secondary" id="check-answers-btn">
                <span class="btn-icon">‚úì</span>
                Check All Answers
            </button>
            <button class="btn btn-primary" id="view-results-btn">
                <span class="btn-icon">üìä</span>
                View Final Results
            </button>
        </div>

        <!-- RESULTS PANEL -->
        <div class="results-panel" id="results-panel">
            <div class="results-header">
                <h2 class="results-title">Coaching & Resource Navigation Results</h2>
                <div class="score-display" id="final-score">0%</div>
            </div>
            
            <div class="clinical-insights">
                <h3 class="insights-title">
                    <span>ü©∫</span> Clinical Proficiency Insights
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Teach-Back Method:</strong> Never ask "Do you understand?" Instead say, "I want to make sure I explained that clearly. Can you tell me in your own words..." This eliminates patient embarrassment and truly assesses comprehension.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Health Literacy Adaptation:</strong> For low literacy patients, use demonstration, pictures, and simple analogies. "Your insulin is like a key that unlocks your cells to let sugar in." Avoid medical jargon.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Cultural Competence:</strong> Ask about food preferences, cooking methods, and cultural beliefs about illness. "What foods are important in your family celebrations? Let's find healthy versions."</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Resource Navigation:</strong> Always provide written resource information. Follow up within 1 week to confirm connection. Document referrals with: Date, resource name, contact info, patient consent, and follow-up plan.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Motivational Interviewing:</strong> Use open-ended questions, affirm strengths, reflective listening, and summarize. "What changes feel possible right now?" rather than "You need to..."</span>
                    </li>
                </ul>
            </div>
            
            <div class="clinical-insights" style="margin-top: 20px;">
                <h3 class="insights-title">
                    <span>üìã</span> Documentation & HIPAA Compliance
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Teach-Back Documentation:</strong> "Patient demonstrated understanding of medication administration through teach-back method. Able to verbalize correct response to missed dose scenario." Include specific phrases patient used.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Referral Documentation:</strong> Must include: Patient consent for referral, resource information provided, educational materials given, barriers discussed, and follow-up plan. Note if interpreter services were used.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>HIPAA for Community Referrals:</strong> Only share minimum necessary information. Use generic referral forms without detailed diagnosis when possible. Obtain written consent for information sharing with community agencies.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Cultural/Language Note:</strong> Document language preference, need for interpreter, cultural considerations addressed, and any accommodations provided (large print, translated materials).</span>
                    </li>
                </ul>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // === STATE MANAGEMENT ===
            const state = {
                activities: {
                    1: { completed: false, correct: 0, total: 2, score: 0 },
                    2: { completed: false, correct: 0, total: 4, score: 0 }
                },
                startedAt: new Date(),
                timeSpent: 0,
                resourceMatches: {
                    'diet': ['Diabetes Nutrition Class', 'WIC Nutrition Counseling'],
                    'exercise': ['SilverSneakers¬Æ Program', 'Aquatic Therapy Class'],
                    'financial': ['Rx Assistance Program', 'GoodRx Coupons'],
                    'emotional': ['Diabetes Support Group', 'ADA Online Community']
                }
            };

            // === DOM ELEMENTS ===
            const progressSteps = document.querySelectorAll('.progress-step');
            const activityCards = document.querySelectorAll('.activity-card');
            const completedCount = document.getElementById('completed-count');
            const accuracyRate = document.getElementById('accuracy-rate');
            const timeSpent = document.getElementById('time-spent');
            const resetBtn = document.getElementById('reset-all-btn');
            const checkBtn = document.getElementById('check-answers-btn');
            const resultsBtn = document.getElementById('view-results-btn');
            const resultsPanel = document.getElementById('results-panel');
            const finalScore = document.getElementById('final-score');
            const resourceDetails = document.getElementById('resource-details');
            const detailsContent = document.getElementById('details-content');

            // === TIMER FUNCTION ===
            function updateTimer() {
                const now = new Date();
                const diff = Math.floor((now - state.startedAt) / 1000);
                state.timeSpent = diff;
                const minutes = Math.floor(diff / 60);
                const seconds = diff % 60;
                timeSpent.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
            setInterval(updateTimer, 1000);

            // === UPDATE PROGRESS SUMMARY ===
            function updateProgressSummary() {
                let completed = 0;
                let totalCorrect = 0;
                let totalItems = 0;

                Object.values(state.activities).forEach(activity => {
                    if (activity.completed) completed++;
                    totalCorrect += activity.correct;
                    totalItems += activity.total;
                });

                completedCount.textContent = completed;
                const accuracy = totalItems > 0 ? Math.round((totalCorrect / totalItems) * 100) : 0;
                accuracyRate.textContent = `${accuracy}%`;

                // Update progress steps
                progressSteps.forEach((step, index) => {
                    if (index < completed) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index === completed) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
            }

            // === ACTIVITY 1: TEACH-BACK METHOD ===
            function initActivity1() {
                const responseOptions = document.querySelectorAll('#response-options .response-option');
                const feedback = document.getElementById('feedback-1');
                const status = document.querySelector('#activity-1 .activity-status');
                
                let selectedOptions = [];
                let correctSelections = 0;

                responseOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        if (state.activities[1].completed) return;

                        const isCorrect = this.dataset.correct === 'true';
                        
                        if (this.classList.contains('selected')) {
                            // Deselect
                            this.classList.remove('selected');
                            selectedOptions = selectedOptions.filter(opt => opt !== this);
                            if (isCorrect) correctSelections--;
                        } else {
                            // Select (max 2)
                            if (selectedOptions.length < 2) {
                                this.classList.add('selected');
                                selectedOptions.push(this);
                                if (isCorrect) correctSelections++;
                                
                                // Visual feedback for wrong selections
                                if (!isCorrect) {
                                    this.classList.add('wrong');
                                    setTimeout(() => {
                                        this.classList.remove('wrong');
                                    }, 500);
                                }
                            }
                        }

                        // Check completion
                        if (selectedOptions.length === 2) {
                            state.activities[1].completed = true;
                            state.activities[1].correct = correctSelections;
                            state.activities[1].score = Math.round((correctSelections / 2) * 100);
                            status.textContent = 'Completed';
                            status.style.color = '#00b894';
                            document.querySelector('#activity-1').classList.add('completed');
                            feedback.classList.add('show');
                            
                            // Disable further selections
                            responseOptions.forEach(opt => {
                                opt.style.cursor = 'default';
                                opt.style.pointerEvents = 'none';
                            });
                            
                            updateProgressSummary();
                        }
                    });
                });
            }

            // === ACTIVITY 2: COMMUNITY RESOURCE NAVIGATOR ===
            function initActivity2() {
                const resourceItems = document.querySelectorAll('#resource-bank .resource-item');
                const needCards = document.querySelectorAll('.need-card');
                const feedback = document.getElementById('feedback-2');
                const status = document.querySelector('#activity-2 .activity-status');
                
                let placedResources = 0;
                let correctMatches = 0;
                const maxResourcesPerNeed = 1;

                // Resource details data
                const resourceInfo = {
                    'Diabetes Nutrition Class': {
                        contact: 'Local hospital diabetes education center',
                        eligibility: 'Diagnosis of diabetes, physician referral',
                        hours: 'Weekly classes, evening options available',
                        notes: 'Offers hands-on cooking demonstrations, carb counting workshops'
                    },
                    'SilverSneakers¬Æ Program': {
                        contact: 'www.silversneakers.com or local participating gyms',
                        eligibility: '65+ with qualifying Medicare Advantage plan',
                        hours: 'Various class times throughout day',
                        notes: 'Low-impact, balance-focused, social component included'
                    },
                    'Rx Assistance Program': {
                        contact: 'Pharmaceutical company websites or www.rxassist.org',
                        eligibility: 'Income-based, varies by program',
                        hours: 'Online applications 24/7',
                        notes: 'Can provide 3-12 month supply, requires physician documentation'
                    },
                    'Diabetes Support Group': {
                        contact: 'American Diabetes Association local chapter',
                        eligibility: 'Open to all with diabetes and family members',
                        hours: 'Monthly meetings, various times',
                        notes: 'Peer support, coping strategies, guest speakers'
                    },
                    'WIC Nutrition Counseling': {
                        contact: 'Local WIC office (income eligible)',
                        eligibility: 'Income ‚â§185% federal poverty level',
                        hours: 'Office hours M-F 8-5',
                        notes: 'Individual counseling, food package includes diabetes-appropriate foods'
                    },
                    'Aquatic Therapy Class': {
                        contact: 'Local YMCA or community pool',
                        eligibility: 'Varies by facility, often physician clearance needed',
                        hours: 'Weekday morning classes',
                        notes: 'Water reduces joint stress, excellent for overweight patients'
                    },
                    'GoodRx Coupons': {
                        contact: 'www.goodrx.com or mobile app',
                        eligibility: 'Available to all',
                        hours: '24/7 online access',
                        notes: 'Free coupons for medications at local pharmacies'
                    },
                    'ADA Online Community': {
                        contact: 'community.diabetes.org',
                        eligibility: 'Free registration',
                        hours: '24/7 forum access',
                        notes: 'Virtual support, moderated by healthcare professionals'
                    }
                };

                // Setup drag and drop
                resourceItems.forEach(item => {
                    item.addEventListener('dragstart', function(e) {
                        e.dataTransfer.setData('text/plain', JSON.stringify({
                            text: this.textContent,
                            resource: this.dataset.resource
                        }));
                        this.classList.add('dragging');
                        
                        // Show resource details on drag start
                        const info = resourceInfo[this.textContent];
                        if (info) {
                            detailsContent.innerHTML = `
                                <strong>${this.textContent}</strong><br><br>
                                <strong>Contact:</strong> ${info.contact}<br>
                                <strong>Eligibility:</strong> ${info.eligibility}<br>
                                <strong>Hours:</strong> ${info.hours}<br>
                                <strong>Notes:</strong> ${info.notes}
                            `;
                            resourceDetails.classList.add('show');
                        }
                    });

                    item.addEventListener('dragend', function() {
                        this.classList.remove('dragging');
                        resourceDetails.classList.remove('show');
                    });
                });

                // Setup drop zones (need cards)
                needCards.forEach(card => {
                    card.addEventListener('dragover', function(e) {
                        e.preventDefault();
                        this.classList.add('hover');
                    });

                    card.addEventListener('dragleave', function() {
                        this.classList.remove('hover');
                    });

                    card.addEventListener('drop', function(e) {
                        e.preventDefault();
                        this.classList.remove('hover');
                        
                        const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                        const needType = this.dataset.need;
                        
                        // Check if card already has a resource
                        if (this.querySelector('.need-content').children.length < maxResourcesPerNeed) {
                            // Check if resource matches need
                            const isCorrect = state.resourceMatches[needType]?.includes(data.text);
                            
                            // Create resource element
                            const resourceDiv = document.createElement('div');
                            resourceDiv.className = 'resource-item';
                            resourceDiv.style.marginTop = '8px';
                            resourceDiv.style.background = isCorrect ? 
                                'rgba(0, 184, 148, 0.1)' : 'rgba(225, 112, 85, 0.1)';
                            resourceDiv.style.border = isCorrect ? 
                                '2px solid var(--color-success)' : '2px solid var(--color-error)';
                            resourceDiv.textContent = data.text;
                            resourceDiv.style.cursor = 'default';
                            
                            // Add click for details
                            resourceDiv.addEventListener('click', function() {
                                const info = resourceInfo[data.text];
                                if (info) {
                                    detailsContent.innerHTML = `
                                        <strong>${data.text}</strong><br><br>
                                        <strong>Contact:</strong> ${info.contact}<br>
                                        <strong>Eligibility:</strong> ${info.eligibility}<br>
                                        <strong>Hours:</strong> ${info.hours}<br>
                                        <strong>Notes:</strong> ${info.notes}
                                    `;
                                    resourceDetails.classList.add('show');
                                }
                            });
                            
                            this.querySelector('.need-content').appendChild(resourceDiv);
                            this.classList.add('filled');
                            
                            // Mark original resource as used
                            const originalResource = Array.from(resourceItems)
                                .find(item => item.textContent === data.text && !item.classList.contains('used'));
                            
                            if (originalResource) {
                                originalResource.classList.add('used');
                                originalResource.style.cursor = 'default';
                                originalResource.draggable = false;
                                placedResources++;
                                if (isCorrect) correctMatches++;
                            }
                            
                            // Check completion
                            if (placedResources === 4) { // One per need category
                                state.activities[2].completed = true;
                                state.activities[2].correct = correctMatches;
                                state.activities[2].score = Math.round((correctMatches / 4) * 100);
                                status.textContent = 'Completed';
                                status.style.color = '#00b894';
                                document.querySelector('#activity-2').classList.add('completed');
                                feedback.classList.add('show');
                                updateProgressSummary();
                            }
                        }
                    });
                });

                // Click resources to show details
                resourceItems.forEach(item => {
                    item.addEventListener('click', function(e) {
                        if (this.classList.contains('used')) return;
                        
                        const info = resourceInfo[this.textContent];
                        if (info) {
                            detailsContent.innerHTML = `
                                <strong>${this.textContent}</strong><br><br>
                                <strong>Contact:</strong> ${info.contact}<br>
                                <strong>Eligibility:</strong> ${info.eligibility}<br>
                                <strong>Hours:</strong> ${info.hours}<br>
                                <strong>Notes:</strong> ${info.notes}
                            `;
                            resourceDetails.classList.add('show');
                        }
                    });
                });
            }

            // === RESET ALL ACTIVITIES ===
            function resetAllActivities() {
                // Reset state
                Object.keys(state.activities).forEach(key => {
                    state.activities[key] = {
                        completed: false,
                        correct: 0,
                        total: parseInt(key) === 1 ? 2 : 4,
                        score: 0
                    };
                });

                // Reset UI
                activityCards.forEach(card => {
                    card.classList.remove('completed');
                    const status = card.querySelector('.activity-status');
                    status.textContent = 'Not Started';
                    status.style.color = '';
                    const feedback = card.querySelector('.feedback-container');
                    feedback.classList.remove('show');
                });

                // Reset Activity 1
                document.querySelectorAll('#response-options .response-option').forEach(option => {
                    option.classList.remove('selected', 'wrong');
                    option.style.cursor = 'pointer';
                    option.style.pointerEvents = 'auto';
                });

                // Reset Activity 2
                document.querySelectorAll('.need-card').forEach(card => {
                    card.classList.remove('filled', 'hover');
                    card.querySelector('.need-content').innerHTML = '';
                });
                
                document.querySelectorAll('#resource-bank .resource-item').forEach(item => {
                    item.classList.remove('used', 'dragging');
                    item.style.cursor = 'grab';
                    item.draggable = true;
                });
                
                resourceDetails.classList.remove('show');

                // Reset results
                resultsPanel.classList.remove('show');

                // Update progress
                updateProgressSummary();
            }

            // === CHECK ALL ANSWERS ===
            function checkAllAnswers() {
                // Force complete Activity 1 with perfect score
                if (!state.activities[1].completed) {
                    const feedback = document.getElementById('feedback-1');
                    const status = document.querySelector('#activity-1 .activity-status');
                    
                    state.activities[1].completed = true;
                    state.activities[1].correct = 2;
                    state.activities[1].score = 100;
                    
                    status.textContent = 'Completed';
                    status.style.color = '#00b894';
                    document.querySelector('#activity-1').classList.add('completed');
                    feedback.classList.add('show');
                    
                    // Select correct answers
                    document.querySelectorAll('#response-options .response-option[data-correct="true"]').forEach(opt => {
                        opt.classList.add('selected');
                        opt.style.pointerEvents = 'none';
                    });
                }

                // Force complete Activity 2 with perfect score
                if (!state.activities[2].completed) {
                    const feedback = document.getElementById('feedback-2');
                    const status = document.querySelector('#activity-2 .activity-status');
                    
                    state.activities[2].completed = true;
                    state.activities[2].correct = 4;
                    state.activities[2].score = 100;
                    
                    status.textContent = 'Completed';
                    status.style.color = '#00b894';
                    document.querySelector('#activity-2').classList.add('completed');
                    feedback.classList.add('show');
                    
                    // Place optimal resources
                    const optimalMatches = {
                        'diet': 'Diabetes Nutrition Class',
                        'exercise': 'SilverSneakers¬Æ Program',
                        'financial': 'Rx Assistance Program',
                        'emotional': 'Diabetes Support Group'
                    };
                    
                    Object.keys(optimalMatches).forEach(need => {
                        const card = document.getElementById(`need-${need}`);
                        const resourceDiv = document.createElement('div');
                        resourceDiv.className = 'resource-item';
                        resourceDiv.style.marginTop = '8px';
                        resourceDiv.style.background = 'rgba(0, 184, 148, 0.1)';
                        resourceDiv.style.border = '2px solid var(--color-success)';
                        resourceDiv.textContent = optimalMatches[need];
                        resourceDiv.style.cursor = 'default';
                        card.querySelector('.need-content').appendChild(resourceDiv);
                        card.classList.add('filled');
                    });
                    
                    // Mark all resources as used
                    document.querySelectorAll('#resource-bank .resource-item').forEach(item => {
                        item.classList.add('used');
                        item.style.cursor = 'default';
                        item.draggable = false;
                    });
                }

                updateProgressSummary();
            }

            // === VIEW FINAL RESULTS ===
            function viewFinalResults() {
                let totalScore = 0;
                let activityCount = 0;
                
                Object.values(state.activities).forEach(activity => {
                    if (activity.completed) {
                        totalScore += activity.score;
                        activityCount++;
                    }
                });
                
                const averageScore = activityCount > 0 ? Math.round(totalScore / activityCount) : 0;
                finalScore.textContent = `${averageScore}%`;
                resultsPanel.classList.add('show');
                
                // Scroll to results
                resultsPanel.scrollIntoView({ behavior: 'smooth' });
            }

            // === INITIALIZE MODULE ===
            initActivity1();
            initActivity2();
            updateProgressSummary();

            // === EVENT LISTENERS ===
            resetBtn.addEventListener('click', resetAllActivities);
            checkBtn.addEventListener('click', checkAllAnswers);
            resultsBtn.addEventListener('click', viewFinalResults);

            // === KEYBOARD NAVIGATION ===
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'r') {
                    e.preventDefault();
                    resetAllActivities();
                }
            });
        });
    </script>
</body>
</html>
