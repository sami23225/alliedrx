<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AlliedRx -- Chapter 5: Patient Education - Module 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --color-primary: #af4bef;
            --color-primary-soft: #d492ff;
            --color-accent: #8380f0;
            --color-success: #00b894;
            --color-error: #e17055;
            --color-warning: #fdcb6e;
            --color-info: #0984e3;
            --color-bg: #f7f5fb;
            --color-text: #2b2b2b;
            --color-muted: #6c6880;
            --color-dark: #0c0a18;
            --radius-lg: 24px;
            --radius-md: 16px;
            --radius-sm: 12px;
            --shadow-soft: 0 18px 45px rgba(23, 10, 61, 0.18);
            --shadow-hover: 0 25px 50px rgba(175, 75, 239, 0.15);
            --shadow-card: 0 12px 30px rgba(15, 23, 42, 0.1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            padding: 24px;
            background: radial-gradient(
                circle at top left,
                #ffffff 0,
                #f1ecff 40%,
                var(--color-bg) 100%
            );
            color: var(--color-text);
            -webkit-text-size-adjust: 100%;
            line-height: 1.5;
        }

        @media (max-width: 600px) {
            body {
                padding: 12px;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes checkmarkPop {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Page Container */
        .page {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-soft);
            padding: 28px 30px 32px;
            position: relative;
            overflow: hidden;
            animation: fadeInUp 0.8s ease-out;
        }

        @media (max-width: 900px) {
            .page {
                padding: 22px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0;
            }
            .page {
                border-radius: 0;
                box-shadow: none;
                padding: 18px 14px 22px;
            }
        }

        /* Header */
        .brand-row {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 14px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            width: 100%;
            animation: fadeIn 0.6s ease-out 0.2s both;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }

        .brand-logo {
            height: 40px;
            width: auto;
            max-width: 100%;
            filter: drop-shadow(0 3px 8px rgba(0, 0, 0, 0.2));
            transition: transform 0.3s ease;
        }

        .brand-logo:hover {
            transform: scale(1.05);
        }

        .course-meta {
            display: flex;
            flex-direction: column;
            gap: 2px;
            max-width: 100%;
        }

        .course-name {
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.16em;
            color: var(--color-muted);
            white-space: normal;
        }

        .week-label {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 4px 10px;
            border-radius: 999px;
            background: rgba(175, 75, 239, 0.08);
            font-size: 0.76rem;
            color: var(--color-primary);
            white-space: normal;
        }

        .week-label-dot {
            width: 8px;
            height: 8px;
            border-radius: 999px;
            background: var(--color-success);
            flex-shrink: 0;
        }

        .badge-mode {
            padding: 5px 10px;
            border-radius: 999px;
            background: rgba(12, 10, 24, 0.06);
            border: 1px solid rgba(12, 10, 24, 0.08);
            font-size: 0.74rem;
            text-transform: uppercase;
            letter-spacing: 0.14em;
            color: var(--color-muted);
            white-space: nowrap;
            transition: all 0.3s ease;
        }

        .badge-mode:hover {
            background: rgba(175, 75, 239, 0.1);
            border-color: var(--color-primary-soft);
            color: var(--color-primary);
        }

        @media (max-width: 480px) {
            .brand-row {
                flex-direction: column;
                align-items: flex-start;
            }
            .badge-mode {
                margin-top: 6px;
            }
        }

        h1 {
            font-size: clamp(1.8rem, 3vw, 2.2rem);
            line-height: 1.1;
            color: var(--color-primary);
            margin-bottom: 6px;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }

        .module-subtitle {
            font-size: 0.98rem;
            color: var(--color-muted);
            max-width: 600px;
            margin-bottom: 24px;
            animation: fadeInUp 0.6s ease-out 0.4s both;
        }

        /* Progress Tracker */
        .progress-tracker {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
            position: relative;
            padding: 0 20px;
            gap: 40px;
        }

        .progress-tracker::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 25%;
            right: 25%;
            height: 3px;
            background: rgba(12, 10, 24, 0.08);
            z-index: 1;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: white;
            border: 2px solid rgba(12, 10, 24, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--color-muted);
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-circle {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
            transform: scale(1.1);
        }

        .progress-step.completed .step-circle {
            background: var(--color-success);
            border-color: var(--color-success);
            color: white;
        }

        .step-label {
            font-size: 0.75rem;
            color: var(--color-muted);
            text-align: center;
            font-weight: 500;
            white-space: nowrap;
        }

        .progress-step.active .step-label {
            color: var(--color-primary);
            font-weight: 600;
        }

        /* Progress Summary */
        .progress-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
            animation: fadeInUp 0.6s ease-out 0.5s both;
        }

        .summary-card {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-md);
            padding: 16px;
            border: 1px solid rgba(12, 10, 24, 0.06);
            text-align: center;
            transition: all 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-card);
            border-color: var(--color-primary-soft);
        }

        .summary-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--color-primary);
            display: block;
            line-height: 1;
            margin-bottom: 4px;
        }

        .summary-label {
            font-size: 0.8rem;
            color: var(--color-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Activity Grid */
        .activity-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .activity-card {
            background: white;
            border-radius: var(--radius-md);
            border: 1px solid rgba(12, 10, 24, 0.08);
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--color-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .activity-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
            border-color: var(--color-primary-soft);
        }

        .activity-card:hover::before {
            opacity: 1;
        }

        .activity-card.completed {
            border-color: var(--color-success);
        }

        .activity-card.completed::before {
            background: var(--color-success);
            opacity: 1;
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .activity-number {
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--color-primary);
            background: rgba(175, 75, 239, 0.1);
            padding: 4px 10px;
            border-radius: 20px;
        }

        .activity-status {
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 12px;
            background: rgba(12, 10, 24, 0.06);
            color: var(--color-muted);
        }

        .activity-card.completed .activity-status {
            background: rgba(0, 184, 148, 0.1);
            color: var(--color-success);
        }

        .activity-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .activity-icon {
            font-size: 1.2rem;
        }

        .activity-description {
            font-size: 0.9rem;
            color: var(--color-muted);
            margin-bottom: 20px;
            line-height: 1.5;
        }

        /* Activity 1: Teaching Sequence */
        .scenario-container {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 16px;
            margin-bottom: 20px;
            border: 1px solid rgba(12, 10, 24, 0.08);
        }

        .scenario-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 8px;
        }

        .scenario-text {
            font-size: 0.85rem;
            color: var(--color-text);
            line-height: 1.5;
        }

        .sequence-instructions {
            font-size: 0.85rem;
            color: var(--color-primary);
            font-weight: 600;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(175, 75, 239, 0.05);
            border-radius: var(--radius-sm);
            border-left: 4px solid var(--color-primary);
        }

        .sequence-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .sequence-step {
            background: rgba(12, 10, 24, 0.05);
            border-radius: var(--radius-sm);
            padding: 15px;
            cursor: grab;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            user-select: none;
            font-size: 0.9rem;
            flex: 1;
            min-width: 250px;
        }

        .sequence-step:hover {
            background: rgba(175, 75, 239, 0.1);
            border-color: var(--color-primary-soft);
            transform: translateY(-2px);
        }

        .sequence-step.dragging {
            opacity: 0.7;
            transform: scale(0.98);
        }

        .sequence-dropzone {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 20px;
            border: 2px dashed rgba(12, 10, 24, 0.1);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .sequence-dropzone.hover {
            border-color: var(--color-primary);
            background: rgba(175, 75, 239, 0.05);
        }

        .sequence-dropzone.empty::after {
            content: 'Drag teaching steps here in correct clinical order';
            color: var(--color-muted);
            text-align: center;
            font-size: 0.9rem;
            margin: auto;
            padding: 40px 0;
        }

        .placed-step {
            background: rgba(12, 10, 24, 0.03);
            border-radius: var(--radius-sm);
            padding: 15px;
            border: 2px solid rgba(12, 10, 24, 0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
        }

        .placed-step.correct {
            background: rgba(0, 184, 148, 0.1);
            border-color: var(--color-success);
        }

        .placed-step.incorrect {
            background: rgba(225, 112, 85, 0.1);
            border-color: var(--color-error);
        }

        .step-position {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(12, 10, 24, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-text);
            flex-shrink: 0;
        }

        .placed-step.correct .step-position {
            background: var(--color-success);
            color: white;
        }

        .placed-step.incorrect .step-position {
            background: var(--color-error);
            color: white;
        }

        .step-content {
            font-size: 0.9rem;
            color: var(--color-text);
            flex: 1;
        }

        .check-sequence-btn {
            padding: 10px 20px;
            border-radius: var(--radius-sm);
            background: var(--color-primary);
            color: white;
            border: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .check-sequence-btn:hover {
            background: #9a3bd6;
            transform: translateY(-2px);
        }

        /* Activity 2: Barrier Matching */
        .matching-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .matching-container {
                grid-template-columns: 1fr;
            }
        }

        .barrier-column, .adaptation-column {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 20px;
            border: 2px dashed rgba(12, 10, 24, 0.1);
            min-height: 300px;
        }

        .barrier-column.hover, .adaptation-column.hover {
            border-color: var(--color-primary);
            background: rgba(175, 75, 239, 0.05);
        }

        .column-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(12, 10, 24, 0.08);
        }

        .barrier-item, .adaptation-item {
            background: rgba(12, 10, 24, 0.05);
            border-radius: var(--radius-sm);
            padding: 12px 15px;
            margin-bottom: 10px;
            font-size: 0.85rem;
            cursor: grab;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            user-select: none;
        }

        .barrier-item:hover, .adaptation-item:hover {
            background: rgba(175, 75, 239, 0.1);
            border-color: var(--color-primary-soft);
            transform: translateY(-2px);
        }

        .barrier-item.dragging, .adaptation-item.dragging {
            opacity: 0.7;
            transform: scale(0.95);
        }

        .barrier-item.matched, .adaptation-item.matched {
            background: rgba(0, 184, 148, 0.1);
            border-color: var(--color-success);
            cursor: default;
        }

        .barrier-item.wrong, .adaptation-item.wrong {
            background: rgba(225, 112, 85, 0.1);
            border-color: var(--color-error);
            animation: shake 0.5s ease;
        }

        .barrier-label {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 4px;
        }

        .barrier-desc {
            font-size: 0.8rem;
            color: var(--color-text);
        }

        .check-matching-btn {
            padding: 10px 20px;
            border-radius: var(--radius-sm);
            background: var(--color-primary);
            color: white;
            border: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }

        .check-matching-btn:hover {
            background: #9a3bd6;
            transform: translateY(-2px);
        }

        /* Feedback */
        .feedback-container {
            background: rgba(12, 10, 24, 0.02);
            border-radius: var(--radius-sm);
            padding: 15px;
            border: 1px solid rgba(12, 10, 24, 0.08);
            margin-top: 20px;
            display: none;
        }

        .feedback-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .feedback-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-icon {
            font-size: 1.2rem;
        }

        .feedback-icon.correct {
            color: var(--color-success);
        }

        .feedback-icon.incorrect {
            color: var(--color-error);
        }

        .feedback-content {
            font-size: 0.85rem;
            color: var(--color-text);
            line-height: 1.5;
        }

        .feedback-content strong {
            color: var(--color-primary);
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: #9a3bd6;
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(175, 75, 239, 0.3);
        }

        .btn-secondary {
            background: rgba(12, 10, 24, 0.06);
            color: var(--color-text);
        }

        .btn-secondary:hover {
            background: rgba(12, 10, 24, 0.1);
            transform: translateY(-2px);
        }

        .btn-icon {
            font-size: 1.1em;
        }

        /* Results Panel */
        .results-panel {
            background: var(--color-dark);
            color: white;
            border-radius: var(--radius-md);
            padding: 30px;
            margin-top: 30px;
            display: none;
            animation: fadeInUp 0.6s ease;
        }

        .results-panel.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .results-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: white;
        }

        .score-display {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--color-primary-soft);
            text-align: center;
            margin: 20px 0;
        }

        .clinical-insights {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--radius-sm);
            padding: 20px;
            margin-top: 20px;
        }

        .insights-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--color-primary-soft);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insights-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .insights-list li {
            display: flex;
            gap: 10px;
            align-items: flex-start;
            font-size: 0.9rem;
            color: #e5e7eb;
        }

        .insight-dot {
            width: 6px;
            height: 6px;
            margin-top: 6px;
            border-radius: 999px;
            background: var(--color-accent);
            flex-shrink: 0;
        }
    </style>
</head>
<body>
    <main class="page" aria-labelledby="module-heading">
        <!-- Header -->
        <header class="brand-row">
            <div class="brand">
                <img
                    src="https://cdn.prod.website-files.com/64d0ccc1558d601cbfb09021/64e9d2f719b1e5258e5d57f5_IMG_1512-p-500.png"
                    alt="AlliedRx logo"
                    class="brand-logo"
                />
                <div class="course-meta">
                    <span class="course-name">Clinical Medical Assistant â€¢ Week 5</span>
                    <div class="week-label">
                        <span class="week-label-dot"></span>
                        <span>Chapter 5: Patient Education</span>
                    </div>
                </div>
            </div>
            <span class="badge-mode">Campus & Online</span>
        </header>

        <h1 id="module-heading">Foundations of Patient Education & Learning Barriers</h1>
        <p class="module-subtitle">
            Master teaching approaches and identify learning barriers for effective patient education. Apply clinical reasoning to Mr. Ignatio's case.
        </p>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Teaching Sequence</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Barrier Matching</div>
            </div>
        </div>

        <!-- Progress Summary -->
        <div class="progress-summary">
            <div class="summary-card">
                <span class="summary-number" id="completed-count">0</span>
                <span class="summary-label">Activities Completed</span>
            </div>
            <div class="summary-card">
                <span class="summary-number" id="accuracy-rate">0%</span>
                <span class="summary-label">Current Accuracy</span>
            </div>
            <div class="summary-card">
                <span class="summary-number" id="time-spent">0:00</span>
                <span class="summary-label">Time Spent</span>
            </div>
        </div>

        <!-- Activity Grid -->
        <div class="activity-grid">
            <!-- Activity 1: Teaching Sequence -->
            <section class="activity-card" id="activity-1" data-activity="1" aria-label="Activity 1: Teaching Sequence for Mr. Ignatio">
                <div class="activity-header">
                    <span class="activity-number">Activity 1</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">
                    <span class="activity-icon">ðŸ“‹</span>
                    Teaching Sequence for Mr. Ignatio
                </h3>
                <p class="activity-description">
                    Arrange these teaching steps in the correct clinical order for Mr. Ignatio's diabetes education plan. Consider assessment before intervention.
                </p>

                <!-- Scenario -->
                <div class="scenario-container">
                    <div class="scenario-title">Patient Case: Mr. Sam Ignatio</div>
                    <div class="scenario-text">
                        62-year-old male with new type 2 diabetes diagnosis. Has functional deafness in left ear, decreased sound quality in right ear, early diabetic vision changes, low health literacy, and prefers family involvement in healthcare decisions.
                    </div>
                </div>

                <div class="sequence-instructions">
                    ðŸŽ¯ Clinical Tip: Always assess barriers BEFORE planning education. Consider: What needs to be evaluated first? What comes before teaching?
                </div>

                <!-- Sequence Steps (RANDOM ORDER - No numbers) -->
                <div class="sequence-container" id="sequence-steps">
                    <div class="sequence-step draggable" data-step="4" draggable="true">
                        Select appropriate teaching materials (large print, visual aids)
                    </div>
                    <div class="sequence-step draggable" data-step="2" draggable="true">
                        Evaluate health literacy using teach-back method
                    </div>
                    <div class="sequence-step draggable" data-step="6" draggable="true">
                        Provide community resource referrals (diabetes support group)
                    </div>
                    <div class="sequence-step draggable" data-step="1" draggable="true">
                        Assess Mr. Ignatio's hearing and vision barriers
                    </div>
                    <div class="sequence-step draggable" data-step="3" draggable="true">
                        Discuss family involvement preferences
                    </div>
                    <div class="sequence-step draggable" data-step="5" draggable="true">
                        Demonstrate glucose monitoring with return demonstration
                    </div>
                </div>

                <!-- Sequence Dropzone -->
                <div class="sequence-dropzone empty" id="sequence-dropzone"></div>

                <button class="check-sequence-btn" id="check-sequence-btn">
                    <span>âœ“</span> Check Teaching Sequence
                </button>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-1">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">âœ“</span>
                        Teaching Sequence Complete!
                    </div>
                    <div class="feedback-content">
                        <strong>Correct Clinical Sequence:</strong><br>
                        1. Assess Mr. Ignatio's hearing and vision barriers<br>
                        2. Evaluate health literacy using teach-back method<br>
                        3. Discuss family involvement preferences<br>
                        4. Select appropriate teaching materials<br>
                        5. Demonstrate glucose monitoring with return demonstration<br>
                        6. Provide community resource referrals<br><br>
                        <strong>Clinical Reasoning:</strong> Assessment always comes before intervention! You must understand the patient's barriers before selecting teaching methods. Family involvement should be discussed early to respect cultural preferences. Hands-on demonstration ensures skill mastery before ending the session.
                    </div>
                </div>
            </section>

            <!-- Activity 2: Barrier Matching -->
            <section class="activity-card" id="activity-2" data-activity="2" aria-label="Activity 2: Learning Barriers and Adaptations">
                <div class="activity-header">
                    <span class="activity-number">Activity 2</span>
                    <span class="activity-status">Not Started</span>
                </div>
                <h3 class="activity-title">
                    <span class="activity-icon">ðŸ§©</span>
                    Learning Barriers & Adaptations
                </h3>
                <p class="activity-description">
                    Match each learning barrier with the most appropriate teaching adaptation for Mr. Ignatio's diabetes education.
                </p>

                <!-- Matching Game -->
                <div class="matching-container">
                    <!-- Barriers Column -->
                    <div class="barrier-column" id="barrier-column">
                        <div class="column-title">Learning Barriers</div>
                        <div class="barrier-item draggable" data-barrier="1" draggable="true">
                            <div class="barrier-label">Hearing Impairment</div>
                            <div class="barrier-desc">Functional deafness left ear, decreased sound quality right ear</div>
                        </div>
                        <div class="barrier-item draggable" data-barrier="2" draggable="true">
                            <div class="barrier-label">Vision Changes</div>
                            <div class="barrier-desc">Early diabetic retinopathy affecting reading ability</div>
                        </div>
                        <div class="barrier-item draggable" data-barrier="3" draggable="true">
                            <div class="barrier-label">Low Health Literacy</div>
                            <div class="barrier-desc">Difficulty understanding medical terminology and instructions</div>
                        </div>
                        <div class="barrier-item draggable" data-barrier="4" draggable="true">
                            <div class="barrier-label">Cultural Preference</div>
                            <div class="barrier-desc">Prefers family involvement in healthcare decisions</div>
                        </div>
                    </div>

                    <!-- Adaptations Column -->
                    <div class="adaptation-column" id="adaptation-column">
                        <div class="column-title">Teaching Adaptations</div>
                        <!-- These will be filled via drag-and-drop -->
                    </div>
                </div>

                <!-- Adaptation Options -->
                <div style="margin-top: 20px;">
                    <div class="column-title" style="text-align: left; margin-bottom: 10px;">Drag Adaptations From Here:</div>
                    <div class="adaptation-options" id="adaptation-options">
                        <div class="adaptation-item draggable" data-adaptation="A" draggable="true">Use visual aids, face patient directly, ensure good lighting for lip reading</div>
                        <div class="adaptation-item draggable" data-adaptation="B" draggable="true">Provide large print materials, high contrast colors, avoid small text</div>
                        <div class="adaptation-item draggable" data-adaptation="C" draggable="true">Simplify language, use teach-back method, avoid medical jargon</div>
                        <div class="adaptation-item draggable" data-adaptation="D" draggable="true">Invite family to sessions, provide materials for family, respect decision hierarchy</div>
                    </div>
                </div>

                <button class="check-matching-btn" id="check-matching-btn">
                    <span>âœ“</span> Check Barrier Matching
                </button>

                <!-- Feedback -->
                <div class="feedback-container" id="feedback-2">
                    <div class="feedback-title">
                        <span class="feedback-icon correct">âœ“</span>
                        Barriers Matched Successfully!
                    </div>
                    <div class="feedback-content">
                        <strong>Correct Matches:</strong><br>
                        â€¢ <strong>Hearing Impairment</strong> â†’ Use visual aids, face patient directly, ensure good lighting for lip reading<br>
                        â€¢ <strong>Vision Changes</strong> â†’ Provide large print materials, high contrast colors, avoid small text<br>
                        â€¢ <strong>Low Health Literacy</strong> â†’ Simplify language, use teach-back method, avoid medical jargon<br>
                        â€¢ <strong>Cultural Preference</strong> â†’ Invite family to sessions, provide materials for family, respect decision hierarchy<br><br>
                        <strong>Key Principle:</strong> Each barrier requires specific adaptations. Multiple barriers (like Mr. Ignatio's hearing + vision + literacy issues) require combined approaches. Document all adaptations in the patient's education plan.
                    </div>
                </div>
            </section>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-secondary" id="reset-all-btn" aria-label="Reset all activities">
                <span class="btn-icon">â†»</span>
                Reset All Activities
            </button>
            <button class="btn btn-primary" id="view-results-btn" aria-label="View final results">
                <span class="btn-icon">ðŸ“Š</span>
                View Final Results
            </button>
        </div>

        <!-- Results Panel -->
        <div class="results-panel" id="results-panel">
            <div class="results-header">
                <h2 class="results-title">Patient Education Foundations - Results</h2>
                <div class="score-display" id="final-score">0%</div>
            </div>
            
            <div class="clinical-insights">
                <h3 class="insights-title">
                    <span>ðŸ©º</span> Clinical Proficiency Insights
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Systematic Assessment:</strong> Always assess barriers (hearing, vision, literacy, culture) BEFORE planning education. Mr. Ignatio needs visual aids, simplified language, and family involvement.</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Barrier Stacking:</strong> Patients often have multiple barriers that compound. Address each with specific adaptations (e.g., hearing + vision impairment = tactile models + verbal reinforcement).</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Teach-Back Method:</strong> Never assume understanding. Ask patients to demonstrate or explain back instructions. Document: "Pt demonstrated correct technique for glucose monitoring."</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Cultural Competence:</strong> Respect cultural preferences for family involvement. Document: "Per pt preference, daughter included in teaching session. Materials provided to both."</span>
                    </li>
                </ul>
            </div>

            <div class="clinical-insights" style="margin-top: 20px;">
                <h3 class="insights-title">
                    <span>ðŸ“‹</span> Documentation & Compliance
                </h3>
                <ul class="insights-list">
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Barrier Documentation:</strong> Document specific barriers: "Pt has functional deafness L ear, decreased hearing R ear, early diabetic retinopathy, low health literacy per assessment."</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Adaptation Documentation:</strong> Note adaptations used: "Provided large print materials, faced pt directly during teaching, used teach-back method, involved daughter per pt request."</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>Community Referrals:</strong> Document referrals: "Referred to diabetes support group at local hospital. Provided contact information and discussed benefits of peer support."</span>
                    </li>
                    <li>
                        <span class="insight-dot"></span>
                        <span><strong>HIPAA Compliance:</strong> When involving family, document: "Pt signed authorization for family involvement. Daughter present for teaching per pt preference."</span>
                    </li>
                </ul>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // State Management
            const state = {
                activities: {
                    1: { completed: false, correct: 0, total: 6, score: 0 },
                    2: { completed: false, correct: 0, total: 4, score: 0 }
                },
                startedAt: new Date(),
                timeSpent: 0
            };

            // DOM Elements
            const progressSteps = document.querySelectorAll('.progress-step');
            const activityCards = document.querySelectorAll('.activity-card');
            const completedCount = document.getElementById('completed-count');
            const accuracyRate = document.getElementById('accuracy-rate');
            const timeSpent = document.getElementById('time-spent');
            const resetBtn = document.getElementById('reset-all-btn');
            const resultsBtn = document.getElementById('view-results-btn');
            const resultsPanel = document.getElementById('results-panel');
            const finalScore = document.getElementById('final-score');

            // Timer for time spent
            function updateTimer() {
                const now = new Date();
                const diff = Math.floor((now - state.startedAt) / 1000);
                state.timeSpent = diff;
                const minutes = Math.floor(diff / 60);
                const seconds = diff % 60;
                timeSpent.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }
            setInterval(updateTimer, 1000);

            // Update Progress Summary
            function updateProgressSummary() {
                let completed = 0;
                let totalCorrect = 0;
                let totalItems = 0;

                Object.values(state.activities).forEach(activity => {
                    if (activity.completed) completed++;
                    totalCorrect += activity.correct;
                    totalItems += activity.total;
                });

                completedCount.textContent = completed;
                const accuracy = totalItems > 0 ? Math.round((totalCorrect / totalItems) * 100) : 0;
                accuracyRate.textContent = `${accuracy}%`;

                // Update progress steps
                progressSteps.forEach((step, index) => {
                    if (index < completed) {
                        step.classList.add('completed');
                        step.classList.remove('active');
                    } else if (index === completed) {
                        step.classList.add('active');
                        step.classList.remove('completed');
                    } else {
                        step.classList.remove('active', 'completed');
                    }
                });
            }

            // Activity 1: Teaching Sequence
            function initActivity1() {
                const sequenceSteps = document.querySelectorAll('#sequence-steps .sequence-step');
                const sequenceDropzone = document.getElementById('sequence-dropzone');
                const checkSequenceBtn = document.getElementById('check-sequence-btn');
                const feedback1 = document.getElementById('feedback-1');
                const status1 = document.querySelector('#activity-1 .activity-status');

                // Correct order (now students must figure this out)
                const correctOrder = ['1', '2', '3', '4', '5', '6'];
                let placedSteps = [];

                // Setup drag and drop
                sequenceSteps.forEach(step => {
                    step.addEventListener('dragstart', function(e) {
                        e.dataTransfer.setData('text/plain', JSON.stringify({
                            step: this.dataset.step,
                            text: this.textContent
                        }));
                        this.classList.add('dragging');
                    });

                    step.addEventListener('dragend', function() {
                        this.classList.remove('dragging');
                    });
                });

                sequenceDropzone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('hover');
                    this.classList.remove('empty');
                });

                sequenceDropzone.addEventListener('dragleave', function() {
                    this.classList.remove('hover');
                });

                sequenceDropzone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('hover');

                    const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                    
                    // Check if step already placed
                    if (placedSteps.includes(data.step)) {
                        return;
                    }

                    placedSteps.push(data.step);
                    const position = placedSteps.length;

                    // Create and add step to dropzone with position number
                    const stepDiv = document.createElement('div');
                    stepDiv.className = 'placed-step';
                    stepDiv.dataset.step = data.step;
                    stepDiv.innerHTML = `
                        <div class="step-position">${position}</div>
                        <div class="step-content">${data.text}</div>
                    `;
                    this.appendChild(stepDiv);

                    // Hide original step
                    const originalStep = document.querySelector(`#sequence-steps .sequence-step[data-step="${data.step}"]`);
                    if (originalStep) {
                        originalStep.style.display = 'none';
                    }
                });

                // Check sequence button
                checkSequenceBtn.addEventListener('click', function() {
                    if (placedSteps.length !== 6) {
                        alert('Please place all 6 steps in the sequence area.');
                        return;
                    }

                    // Check each placed step
                    const placedStepElements = sequenceDropzone.querySelectorAll('.placed-step');
                    let correctCount = 0;

                    placedStepElements.forEach((stepElement, index) => {
                        const stepNumber = stepElement.dataset.step;
                        const correctStep = correctOrder[index];
                        
                        if (stepNumber === correctStep) {
                            stepElement.classList.add('correct');
                            stepElement.classList.remove('incorrect');
                            correctCount++;
                        } else {
                            stepElement.classList.add('incorrect');
                            stepElement.classList.remove('correct');
                        }
                    });

                    // Update state
                    state.activities[1].correct = correctCount;
                    state.activities[1].score = Math.round((correctCount / 6) * 100);
                    state.activities[1].completed = true;
                    
                    // Show feedback with correct order if needed
                    if (correctCount < 6) {
                        setTimeout(() => {
                            // Show correct order
                            sequenceDropzone.innerHTML = '';
                            correctOrder.forEach((stepNum, index) => {
                                const originalStep = document.querySelector(`#sequence-steps .sequence-step[data-step="${stepNum}"]`);
                                const stepDiv = document.createElement('div');
                                stepDiv.className = 'placed-step correct';
                                stepDiv.innerHTML = `
                                    <div class="step-position">${index + 1}</div>
                                    <div class="step-content">${originalStep.textContent}</div>
                                `;
                                sequenceDropzone.appendChild(stepDiv);
                            });
                        }, 1500);
                    }

                    status1.textContent = 'Completed';
                    status1.style.color = '#00b894';
                    document.querySelector('#activity-1').classList.add('completed');
                    feedback1.classList.add('show');
                    
                    updateProgressSummary();
                });
            }

            // Activity 2: Barrier Matching
            function initActivity2() {
                const barrierItems = document.querySelectorAll('#barrier-column .barrier-item');
                const adaptationItems = document.querySelectorAll('#adaptation-options .adaptation-item');
                const adaptationColumn = document.getElementById('adaptation-column');
                const checkMatchingBtn = document.getElementById('check-matching-btn');
                const feedback2 = document.getElementById('feedback-2');
                const status2 = document.querySelector('#activity-2 .activity-status');

                // Correct matches: barrier 1 -> A, 2 -> B, 3 -> C, 4 -> D
                const correctMatches = {
                    '1': 'A',
                    '2': 'B', 
                    '3': 'C',
                    '4': 'D'
                };

                const adaptationTexts = {
                    'A': 'Use visual aids, face patient directly, ensure good lighting for lip reading',
                    'B': 'Provide large print materials, high contrast colors, avoid small text',
                    'C': 'Simplify language, use teach-back method, avoid medical jargon',
                    'D': 'Invite family to sessions, provide materials for family, respect decision hierarchy'
                };

                let matchedPairs = {};
                let placedAdaptations = [];

                // Setup drag for barrier items
                barrierItems.forEach(item => {
                    item.addEventListener('dragstart', function(e) {
                        e.dataTransfer.setData('text/plain', JSON.stringify({
                            type: 'barrier',
                            barrier: this.dataset.barrier,
                            text: this.querySelector('.barrier-label').textContent
                        }));
                        this.classList.add('dragging');
                    });

                    item.addEventListener('dragend', function() {
                        this.classList.remove('dragging');
                    });
                });

                // Setup drag for adaptation items
                adaptationItems.forEach(item => {
                    item.addEventListener('dragstart', function(e) {
                        e.dataTransfer.setData('text/plain', JSON.stringify({
                            type: 'adaptation',
                            adaptation: this.dataset.adaptation,
                            text: this.textContent
                        }));
                        this.classList.add('dragging');
                    });

                    item.addEventListener('dragend', function() {
                        this.classList.remove('dragging');
                    });
                });

                // Setup drop zone
                adaptationColumn.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('hover');
                });

                adaptationColumn.addEventListener('dragleave', function() {
                    this.classList.remove('hover');
                });

                adaptationColumn.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('hover');

                    const data = JSON.parse(e.dataTransfer.getData('text/plain'));
                    
                    if (data.type === 'adaptation') {
                        // Check if adaptation already placed
                        if (placedAdaptations.includes(data.adaptation)) {
                            return;
                        }

                        placedAdaptations.push(data.adaptation);

                        // Create and add adaptation to column
                        const adaptationDiv = document.createElement('div');
                        adaptationDiv.className = 'adaptation-item';
                        adaptationDiv.dataset.adaptation = data.adaptation;
                        adaptationDiv.textContent = data.text;
                        this.appendChild(adaptationDiv);

                        // Hide original adaptation
                        const originalItem = document.querySelector(`#adaptation-options .adaptation-item[data-adaptation="${data.adaptation}"]`);
                        if (originalItem) {
                            originalItem.style.display = 'none';
                        }
                    }
                });

                // Check matching button
                checkMatchingBtn.addEventListener('click', function() {
                    if (placedAdaptations.length !== 4) {
                        alert('Please place all 4 adaptations in the matching area.');
                        return;
                    }

                    // Get placed adaptations in order
                    const placedAdaptationElements = adaptationColumn.querySelectorAll('.adaptation-item');
                    let correctCount = 0;
                    let allCorrect = true;

                    // Check each placed adaptation
                    placedAdaptationElements.forEach((element, index) => {
                        const adaptationId = element.dataset.adaptation;
                        const barrierElement = barrierItems[index];
                        const barrierId = barrierElement ? barrierElement.dataset.barrier : null;
                        
                        if (barrierId && correctMatches[barrierId] === adaptationId) {
                            element.classList.add('matched');
                            barrierElement.classList.add('matched');
                            correctCount++;
                        } else {
                            element.classList.add('wrong');
                            if (barrierElement) {
                                barrierElement.classList.add('wrong');
                            }
                            allCorrect = false;
                        }
                    });

                    // Show correct matches if wrong
                    if (!allCorrect) {
                        setTimeout(() => {
                            // Clear and show correct matches
                            adaptationColumn.innerHTML = '<div class="column-title">Teaching Adaptations</div>';
                            barrierItems.forEach(barrierItem => {
                                barrierItem.classList.remove('wrong', 'matched');
                            });

                            // Show all correct matches
                            barrierItems.forEach(barrierItem => {
                                const barrierId = barrierItem.dataset.barrier;
                                const correctAdaptationId = correctMatches[barrierId];
                                
                                const adaptationDiv = document.createElement('div');
                                adaptationDiv.className = 'adaptation-item matched';
                                adaptationDiv.textContent = adaptationTexts[correctAdaptationId];
                                adaptationColumn.appendChild(adaptationDiv);
                                
                                barrierItem.classList.add('matched');
                            });
                        }, 1000);
                    }

                    state.activities[2].correct = correctCount;
                    state.activities[2].score = Math.round((correctCount / 4) * 100);
                    state.activities[2].completed = true;
                    status2.textContent = 'Completed';
                    status2.style.color = '#00b894';
                    document.querySelector('#activity-2').classList.add('completed');
                    feedback2.classList.add('show');
                    
                    updateProgressSummary();
                });
            }

            // Reset All Activities
            function resetAllActivities() {
                // Reset state
                Object.keys(state.activities).forEach(key => {
                    state.activities[key] = {
                        completed: false,
                        correct: 0,
                        total: parseInt(key) === 1 ? 6 : 4,
                        score: 0
                    };
                });

                // Reset UI
                activityCards.forEach(card => {
                    card.classList.remove('completed');
                    const status = card.querySelector('.activity-status');
                    status.textContent = 'Not Started';
                    status.style.color = '';
                    const feedback = card.querySelector('.feedback-container');
                    feedback.classList.remove('show');
                });

                // Reset Activity 1
                const sequenceDropzone = document.getElementById('sequence-dropzone');
                sequenceDropzone.innerHTML = '';
                sequenceDropzone.classList.add('empty');
                document.querySelectorAll('#sequence-steps .sequence-step').forEach(step => {
                    step.style.display = '';
                    step.classList.remove('dragging');
                });

                // Reset Activity 2
                const adaptationColumn = document.getElementById('adaptation-column');
                adaptationColumn.innerHTML = '<div class="column-title">Teaching Adaptations</div>';
                document.querySelectorAll('#barrier-column .barrier-item').forEach(item => {
                    item.classList.remove('matched', 'wrong', 'dragging');
                });
                document.querySelectorAll('#adaptation-options .adaptation-item').forEach(item => {
                    item.style.display = '';
                    item.classList.remove('matched', 'wrong', 'dragging');
                });

                // Reset results
                resultsPanel.classList.remove('show');

                // Update progress
                updateProgressSummary();
            }

            // View Final Results
            function viewFinalResults() {
                let totalScore = 0;
                let activityCount = 0;

                Object.values(state.activities).forEach(activity => {
                    if (activity.completed) {
                        totalScore += activity.score;
                        activityCount++;
                    }
                });

                const averageScore = activityCount > 0 ? Math.round(totalScore / activityCount) : 0;
                finalScore.textContent = `${averageScore}%`;
                resultsPanel.classList.add('show');
                resultsPanel.scrollIntoView({ behavior: 'smooth' });
            }

            // Initialize activities
            initActivity1();
            initActivity2();

            // Event listeners
            resetBtn.addEventListener('click', resetAllActivities);
            resultsBtn.addEventListener('click', viewFinalResults);

            // Initial progress update
            updateProgressSummary();
        });
    </script>
</body>
</html>
